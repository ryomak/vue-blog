(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{320:function(t,e,s){t.exports=s.p+"assets/img/gazo.1ef02c36.png"},331:function(t,e,s){"use strict";s.r(e);var r=[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"ラズベリーパイを外部からsshでアクセスする方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ラズベリーパイを外部からsshでアクセスする方法","aria-hidden":"true"}},[this._v("#")]),this._v(" ラズベリーパイを外部からSSHでアクセスする方法")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"目的"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#目的","aria-hidden":"true"}},[this._v("#")]),this._v(" 目的")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#方法","aria-hidden":"true"}},[this._v("#")]),this._v(" 方法")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ol",[e("li",[this._v("ラズパイにプライベットネットーワークアドレスを固定する")]),this._v(" "),e("li",[this._v("ラズパイ側のポート解放")]),this._v(" "),e("li",[this._v("ルータのポート解放&解放したポートのアクセスを全て特定のプライベートIPアドレスに渡す")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:s(320),alt:"An image"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"注意"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#注意","aria-hidden":"true"}},[this._v("#")]),this._v(" 注意")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_1-ラズパイにプライベ−トipアドレスを固定する"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-ラズパイにプライベ−トipアドレスを固定する","aria-hidden":"true"}},[this._v("#")]),this._v(" 1.ラズパイにプライベ−トIPアドレスを固定する")])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("code",[this._v("sudo vi /etc/dhcpcd.conf")]),this._v("で編集->一番最後に以下の文章(コメントアウト以外)を追記")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language-/etc/dhcpcd.conf extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("...\n#無線の場合はwlan0等\ninterface eth0\n#固定したいプライベートIPアドレス\n#後々，Atermの場合はポート解放の際，プライベートIPアドレス192.168.10.XXのXXは機種によって，DHCPの自動割り当て範囲外に設定する必要があるため確認してください\n#ex)http://www.aterm.jp/support/guide/category/enjoy/port/005/main.html\nstatic ip_address=192.168.10.XX/24\n#ゲートウェイ\nstatic routers=192.168.XX.XX\n# (ルータの設定ページにて)情報->現在の状態->拡張表示でDNSサーバを取得\nstatic domain_name_servers=192.168.XX.XX\n\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ol",{attrs:{start:"3"}},[e("li",[e("code",[this._v("sudo reboot")]),this._v("で再起動")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_2-ラズパイ側のポート解放"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-ラズパイ側のポート解放","aria-hidden":"true"}},[this._v("#")]),this._v(" 2.ラズパイ側のポート解放")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ol",[s("li",[s("code",[t._v("sudo apt-get ufw")]),t._v("でインストール")]),t._v(" "),s("li",[s("code",[t._v("sudo ufw enable")]),t._v("でufw起動")]),t._v(" "),s("li",[s("code",[t._v("sudo ufw allow ssh")]),t._v("でssh通信を起動(他のポートの許可の場合"),s("code",[t._v("sudo ufw allow <port>")]),t._v(")")]),t._v(" "),s("li",[s("code",[t._v("sudo ufw status")]),t._v("　でポートが解放されているか確認")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"_3-ルータのポート解放-解放したポートのアクセスを全て特定のプライベートipアドレスに渡す"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-ルータのポート解放-解放したポートのアクセスを全て特定のプライベートipアドレスに渡す","aria-hidden":"true"}},[this._v("#")]),this._v(" 3.ルータのポート解放&解放したポートのアクセスを全て特定のプライベートIPアドレスに渡す")])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("code",[this._v("192.168.10.1")]),this._v("にブラウザでアクセスしルータの設定ページを開く")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"アクセスしてみる"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#アクセスしてみる","aria-hidden":"true"}},[this._v("#")]),this._v(" アクセスしてみる")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("code",[this._v("ssh pi@(グローバルIP)")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"最後に"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#最後に","aria-hidden":"true"}},[this._v("#")]),this._v(" 最後に")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"問題"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#問題","aria-hidden":"true"}},[this._v("#")]),this._v(" 問題")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("契約しているブロードバンドが動的にグローバルIPアドレスを割り当てている\n"),e("ul",[e("li",[this._v("DDNS設定")]),this._v(" "),e("li",[this._v("定期的に現状のグローバルIPアドレスを通知する\t\n今回は面倒だったので後者を選択しました．")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("#!/bin/sh\nip_adress=`curl -s ifconfig.me`\ncurl -X POST -H 'Authorization:Bearer ＜トークン＞' -F \"message=$ip_adress\" https://notify-api.line.me/api/notify\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("これを"),e("code",[this._v("crontab")]),this._v("で定期実行し，Linenotifyに自動通知するようにしました．")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"おまけ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#おまけ","aria-hidden":"true"}},[this._v("#")]),this._v(" おまけ")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"最後に-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#最後に-2","aria-hidden":"true"}},[this._v("#")]),this._v(" 最後に")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("NextCloud")]),this._v(" "),e("li",[this._v("vpn(大学のプロキシが面倒臭いため)\nやっていきます")])])}],i=s(1),a=Object(i.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),s("p",[t._v("ラズパイを外部からSSHでアクセスする")]),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),s("p",[t._v("また有線でルータと接続させています．\nルータはAtermを用いています")]),t._v(" "),t._m(6),t._v(" "),s("ol",[s("li",[t._v("ラズパイにログイン")]),t._v(" "),t._m(7),t._v(" "),s("li",[s("a",{attrs:{href:"https://qiita.com/MarieKawasuji/items/b088ffb252a92eee8f5d",target:"_blank",rel:"noopener noreferrer"}},[t._v("ここ"),s("OutboundLink")],1),t._v("を参照")])]),t._v(" "),t._m(8),t._m(9),t._v(" "),t._m(10),t._v(" "),s("p",[t._v("今回はufwを用います（iptablesのラッパらしい)")]),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),s("p",[t._v("ルータによっては設定の仕方が違うので注意してください")]),t._v(" "),s("ol",[t._m(13),t._v(" "),s("li",[t._v("詳細設定->ポートマッピング設定")]),t._v(" "),s("li",[t._v("先ほど設定したプライベートIPアドレスを指定して，開けるポートを書いて保存")]),t._v(" "),s("li",[s("a",{attrs:{href:"http://www.cman.jp/network/support/port.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ここ"),s("OutboundLink")],1),t._v("でポートが空いているか確認")])]),t._v(" "),t._m(14),t._v(" "),t._m(15),t._v(" "),t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),t._m(19),t._m(20),t._v(" "),t._m(21),t._v(" "),s("p",[t._v("sshのポートをデフォルトの22で開けていると変なアクセスが多数来るため，変更しておいた方が良い\n"),s("a",{attrs:{href:"https://webkaru.net/linux/change-ssh-port/",target:"_blank",rel:"noopener noreferrer"}},[t._v("ここ"),s("OutboundLink")],1),t._v("を参考にしたらできました")]),t._v(" "),t._m(22),t._v(" "),s("p",[t._v("初めての事ばかりで戸惑いましたが，なんとかなりました．\nセキュリティが最低限もできていないため，これからなんとかします．")]),t._v(" "),s("p",[t._v("slackにログイン履歴を通知するようにしたので，勝手にログインされていれば，すぐサーバ閉じます笑")]),t._v(" "),s("p",[t._v("また，これから")]),t._v(" "),t._m(23)])},r,!1,null,null,null);a.options.__file="out-ssh-with-raspberrypi.md";e.default=a.exports}}]);